generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Brand {
  id       Int      @id @default(autoincrement())
  name     String
  imageUrl String
  Arcade   Arcade[]
}

model Arcade {
  id          Int          @id @default(autoincrement())
  name        String
  lat         Float
  lng         Float
  rating      Int
  ratingCount Int
  Brand       Brand        @relation(fields: [BrandId], references: [id])
  BrandId     Int
  ArcadeGame  ArcadeGame[]
  Bookmark    Bookmark[]
  Session     Session[]
}

model Game {
  id         Int          @id @default(autoincrement())
  name       String
  logoUrl    String
  ArcadeGame ArcadeGame[]
}

model ArcadeGame {
  id          Int    @id @default(autoincrement())
  reportCount Int
  Arcade      Arcade @relation(fields: [ArcadeId], references: [id])
  ArcadeId    Int
  Game        Game   @relation(fields: [GameId], references: [id])
  GameId      Int
}

model User {
  id                   Int          @id @default(autoincrement())
  email                String       @unique
  username             String
  password             String
  premium              Boolean      @default(false)
  subscriptionDeadline DateTime?
  Bookmark             Bookmark[]
  Session              Session[]
  userSender           Inbox[]      @relation("UserSender")
  userReciever         Inbox[]      @relation("UserReciever")
  userFollowed         UserFollow[] @relation("UserFollowed")
  userFollower         UserFollow[] @relation("UserFollower")
}

model Bookmark {
  id       Int    @id @default(autoincrement())
  User     User   @relation(fields: [UserId], references: [id])
  Arcade   Arcade @relation(fields: [ArcadeId], references: [id])
  UserId   Int
  ArcadeId Int
}

model Session {
  id       Int      @id @default(autoincrement())
  Arcade   Arcade   @relation(fields: [ArcadeId], references: [id])
  User     User     @relation(fields: [UserId], references: [id])
  date     DateTime
  ArcadeId Int
  UserId   Int
}

model UserFollow {
  id         Int  @id @default(autoincrement())
  Followed   User @relation("UserFollowed", fields: [FollowedId], references: [id])
  Follower   User @relation("UserFollower", fields: [FollowerId], references: [id])
  FollowedId Int  @unique
  FollowerId Int  @unique
}

model Inbox {
  id         Int  @id @default(autoincrement())
  Sender     User @relation("UserSender", fields: [SenderId], references: [id])
  Receiver   User @relation("UserReciever", fields: [ReceiverId], references: [id])
  SenderId   Int  @unique
  ReceiverId Int  @unique
}
